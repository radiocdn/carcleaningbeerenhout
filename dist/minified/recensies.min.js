const CONFIG={url:"https://corsproxy.io/?https://www.powr.io/product_reviews/37775147/product/0-f2ff3b4c_1705090005/page/1.json",fallback:{success:!0,reviews:[{id:27921,rating:5,created_at:"2024-01-15T17:01:18.278Z",reviewer:{first_name:"kiki",last_name:"VD weg"},review:{title:"in een woord TOP!",body:"maakt goed schoon voor n mooi prijsje"}},{id:27855,rating:5,created_at:"2024-01-13T09:53:11.719Z",reviewer:{first_name:"jannes",last_name:"VD weg"},review:{title:"PERFECT!",body:"doet alles goed voor een mooi prijsje"}}]}};function starSvg(a){return`<svg class="star" viewBox="0 0 24 24"><path fill="${a?"currentColor":"rgba(255,255,255,.15)"}" d="M12 .587l3.668 7.431 8.2 1.193-5.93 5.782 1.4 8.162L12 18.896l-7.338 3.86 1.4-8.162L.132 9.211l8.2-1.193z"/></svg>`}function escapeHtml(a){return a.replace(/[&<>"']/g,a=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[a])}async function loadReviews(){try{const a=await fetch(CONFIG.url,{cache:"no-store"});if(!a.ok)throw 0;const b=await a.json();render(b.reviews||[])}catch{render(CONFIG.fallback.reviews)}}function render(a){const b=document.getElementById("carousel-track");return a.length?void(a.sort((c,a)=>new Date(a.created_at)-new Date(c.created_at)),b.innerHTML=a.map(a=>{const b=`${a.reviewer?.first_name||""} ${a.reviewer?.last_name||""}`.trim()||"Anoniem",c=new Date(a.created_at).toLocaleDateString("nl-NL"),d=Array.from({length:5},(b,c)=>starSvg(c<a.rating)).join("");return`<div class="review-card">
					  <div class="review-head">
						<div>
						  <div class="review-name">${escapeHtml(b)}</div>
						  <div class="review-title">${escapeHtml(a.review.title||"")}</div>
						</div>
						<div class="stars">${d}</div>
					  </div>
					  <div class="review-body">${escapeHtml(a.review.body||"")}</div>
					  <div class="review-date">${c}</div>
					</div>`}).join(""),initCarousel()):void(b.innerHTML="<p>Geen reviews gevonden.</p>")}function initCarousel(){const a=document.getElementById("carousel-track"),b=[...a.children];let c=0;const d=()=>a.style.transform=`translateX(-${100*c}%)`;document.getElementById("next").onclick=()=>{c=(c+1)%b.length,d()},document.getElementById("prev").onclick=()=>{c=(c-1+b.length)%b.length,d()},setInterval(()=>{c=(c+1)%b.length,d()},6e3)}document.getElementById("write-btn").onclick=()=>{window.open("/recensies")},loadReviews();